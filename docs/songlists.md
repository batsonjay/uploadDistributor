# Songlists

This document defines the structure, normalization, and storage of songlist files used in the Upload Distributor project.

## Purpose

Most Songlist files will be associated with pre-recorded `.mp3` files that are uploaded by a DJ and sent to Azuracast for future broadcast. In some cases, the upload has the same purpose but which were broadcast in the past.

Songlists accompany each `.mp3` upload and describe the information associated broadcast (called "Broadcast Data" here) plus a list of the songs played in the broadcast (called the "Track List" here).

Broadcast Data is collected from the DJ when they use the client to upload a .mp3 file. A DJ attaches a Track List data file in the same upload of the .mp3 file.

## Anticipated Track List File Formats 

The Track List data will arrive in one of several forms:
- A `.nml` file, containing structured information, generated by the Traktor Pro DJ software
- A plain text or .docx file containing semi-structured text, generated manually by the DJ

Code will eventually need written to normalize all these into the JSON format to be used to store the complete Songlist file.

## Normalization Rules

- All Songlist must include the following information about the broadcast:
  - `broadcast_date` (in `YYYY-MM-DD` format)
  - `broadcast_time` (in `HH:MM:SS` format)
  - `DJ`
  - `setTitle`
  - `duration`

- All Track List data must include:
  - `title`
  - `release`

- Timestamps are validated and normalized to a consistent format.
- Artist/title capitalization is standardized, as is any "feat." notation (which is often included when a track title indicated a "featured" artist)

## Example (JSON)
TODO: NEEDS GENERATED

## Persistent Storage

- Songlists are stored persistently by the daemon.
- Storage format: JSON
- Storage location: Local filesystem, with a directory per-DJ
- Each songlist is associated with a unique upload ID

## Usage

- Track List files are parsed and validated during upload processing.
- Used to populate tracklists on Mixcloud and AzuraCast.
- Not used by SoundCloud (but retained for consistency).

## Versioning

- Songlist schema may evolve.
- Version field may be added to support backward compatibility.
